def foo(z : R, n : size, x : R[3]):
  z_1 = \phi(True ? 4.2 : z)
  x_1 =\d0 \phi(0 == d0 ? 2.0 : x[d0])
  if n < 3:
    x_2 =\d0 \phi(n == d0 ? 3.0 : x_1[d0])
------------------------ z_1 : \n
                             - 4.2
                         x_1 : \n. \d0
                             - d0
                                - x[d0]
                                - 2.0
                                - x[d0]
                         x_2 : \n. \d0
                             - (n-d0)
                                    - x[d0]
                                    - 3.0
                                    - d0
                                       - x[d0]
                                       - 2.0
                                       - x[d0]
  else:
------------------------ z_1 : \n
                             - 4.2
                         x_1 : \n. \d0
                             - d0
                                - x[d0]
                                - 2.0
                                - x[d0]
  z_2 = \phi(n < 3 ? z_1 : z_1) # IfJoin
  x_3 =\d0 \phi(n < 3 ? x_2[d0] : x_1[d0]) # IfJoin
  pass
------------------------ z_1 : \n
                             - 4.2
                         x_1 : \n. \d0
                             - d0
                                - x[d0]
                                - 2.0
                                - x[d0]
                         x_2 : \n. \d0
                             - (n-d0)
                                    - x[d0]
                                    - 3.0
                                    - d0
                                       - x[d0]
                                       - 2.0
                                       - x[d0]
                         z_2 : \n
                             - 4.2
                         x_3 : \n. \d0
                             - (n-3)
                                   - 3.0
                                   - d0
                                      - x[d0]
                                      - 2.0
                                      - x[d0]
                                   - d0
                                      - x[d0]
                                      - 2.0
                                      - x[d0]

if n < 3:
  x =\d0 \phi(n == d0 ? 3.0 : x_1[d0])
------------------------ z : \n
                             - 4.2
                         x_1 : \n. \d0
                             - d0
                                - x_2[d0]
                                - 2.0
                                - x_2[d0]
                         x : \n. \d0
                             - (n-d0)
                                    - x_2[d0]
                                    - 3.0
                                    - d0
                                       - x_2[d0]
                                       - 2.0
                                       - x_2[d0]
else:
------------------------ z : \n
                             - 4.2
                         x_1 : \n. \d0
                             - d0
                                - x_2[d0]
                                - 2.0
                                - x_2[d0]